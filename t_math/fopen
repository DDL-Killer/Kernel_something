[4mFILE[24m(1)                             General Commands Manual                            [4mFILE[24m(1)

[1mNAME[0m
       file ‚Äî determine file type

[1mSYNOPSIS[0m
       [1mfile [22m[[1m-bcdEhiklLNnprsSvzZ0[22m] [[1m--apple[22m] [[1m--exclude-quiet[22m] [[1m--extension[22m] [[1m--mime-encoding[22m]
            [[1m--mime-type[22m]   [[1m-e   [4m[22mtestname[24m]  [[1m-F  [4m[22mseparator[24m]  [[1m-f  [4m[22mnamefile[24m]  [[1m-m  [4m[22mmagicfiles[24m]
            [[1m-P [4m[22mname=value[24m] [4mfile[24m [4m...[0m
       [1mfile -C [22m[[1m-m [4m[22mmagicfiles[24m]
       [1mfile [22m[[1m--help[22m]

[1mDESCRIPTION[0m
       This manual page documents version 5.46 of the [1mfile [22mcommand.

       [1mfile [22mtests each argument in an attempt to classify it.  There are three sets of  tests,
       performed  in this order: filesystem tests, magic tests, and language tests.  The [4mfirst[0m
       test that succeeds causes the file type to be printed.

       The type printed will usually contain one of the words [4mtext[24m  (the  file  contains  only
       printing characters and a few common control characters and is probably safe to read on
       an  ASCII terminal), [4mexecutable[24m (the file contains the result of compiling a program in
       a form understandable to some UNIX kernel or another), or [4mdata[24m  meaning  anything  else
       (data  is  usually  ‚Äúbinary‚Äù or non-printable).  Exceptions are well-known file formats
       (core files, tar archives) that are known to contain binary data.  When modifying magic
       files or the program itself, make sure to [4mpreserve[24m [4mthese[24m  [4mkeywords[24m.   Users  depend  on
       knowing that all the readable files in a directory have the word ‚Äútext‚Äù printed.  Don't
       do as Berkeley did and change ‚Äúshell commands text‚Äù to ‚Äúshell script‚Äù.

       The filesystem tests are based on examining the return from a [4mstat[24m(2) system call.  The
       program  checks to see if the file is empty, or if it's some sort of special file.  Any
       known file types appropriate to the system you are running on (sockets, symbolic links,
       or named pipes (FIFOs) on those systems that implement them) are intuited if  they  are
       defined in the system header file <[4msys/stat.h[24m>.

       The magic tests are used to check for files with data in particular fixed formats.  The
       canonical  example  of this is a binary executable (compiled program) a.out file, whose
       format is defined in <[4melf.h[24m>, <[4ma.out.h[24m> and possibly <[4mexec.h[24m> in the  standard  include
       directory.  These files have a ‚Äúmagic number‚Äù stored in a particular place near the be‚Äê
       ginning of the file that tells the UNIX operating system that the file is a binary exe‚Äê
       cutable,  and which of several types thereof.  The concept of a ‚Äúmagic number‚Äù has been
       applied by extension to data files.  Any file with some invariant identifier at a small
       fixed offset into the file can usually be described in this way.  The information iden‚Äê
       tifying    these    files    is    read    from     the     compiled     magic     file
       [4m/usr/share/file/misc/magic.mgc[24m,      or      the     files     in     the     directory
       [4m/usr/share/file/misc/magic[24m if the compiled  file  does  not  exist.   In  addition,  if
       [4m$HOME/.magic.mgc[24m  or  [4m$HOME/.magic[24m  exists, it will be used in preference to the system
       magic files.

       If a file does not match any of the entries in the magic file, it is examined to see if
       it seems to be a text file.  ASCII, ISO-8859-x, non-ISO 8-bit extended-ASCII  character
       sets  (such  as  those  used  on  Macintosh and IBM PC systems), UTF-8-encoded Unicode,
       UTF-16-encoded Unicode, and EBCDIC character sets can be distinguished by the different
       ranges and sequences of bytes that constitute printable text in each set.   If  a  file
       passes  any  of  these tests, its character set is reported.  ASCII, ISO-8859-x, UTF-8,
       and extended-ASCII files are identified as ‚Äútext‚Äù because they will be mostly  readable
       on nearly any terminal; UTF-16 and EBCDIC are only ‚Äúcharacter data‚Äù because, while they
       contain text, it is text that will require translation before it can be read.  In addi‚Äê
       tion,  [1mfile [22mwill attempt to determine other characteristics of text-type files.  If the
       lines of a file are terminated by CR, CRLF, or NEL, instead of  the  Unix-standard  LF,
       this  will  be  reported.  Files that contain embedded escape sequences or overstriking
       will also be identified.

       Once [1mfile [22mhas determined the character set used in a text-type file, it will attempt to
       determine in what language the file is written.  The language tests look for particular
       strings (cf.  <[4mnames.h[24m>) that can appear anywhere in the first few blocks  of  a  file.
       For  example,  the  keyword [4m.br[24m indicates that the file is most likely a [4mtroff[24m(1) input
       file, just as the keyword [4mstruct[24m indicates a C program.  These tests are less  reliable
       than  the  previous two groups, so they are performed last.  The language test routines
       also test for some miscellany (such as [4mtar[24m(1) archives, JSON files).

       Any file that cannot be identified as having been written in any of the character  sets
       listed above is simply said to be ‚Äúdata‚Äù.

[1mOPTIONS[0m
       [1m--apple[0m
               Causes  the  [1mfile  [22mcommand  to output the file type and creator code as used by
               older MacOS versions.  The code consists of eight letters, the first describing
               the file type, the latter the creator.  This option  works  properly  only  for
               file formats that have the apple-style output defined.

       [1m-b[22m, [1m--brief[0m
               Do not prepend filenames to output lines (brief mode).

       [1m-C[22m, [1m--compile[0m
               Write  a  [4mmagic.mgc[24m output file that contains a pre-parsed version of the magic
               file or directory.

       [1m-c[22m, [1m--checking-printout[0m
               Cause a checking printout of the parsed form of the magic file.  This  is  usu‚Äê
               ally  used  in  conjunction with the [1m-m [22moption to debug a new magic file before
               installing it.

       [1m-d      [22mPrints internal debugging information to stderr.

       [1m-E      [22mOn filesystem errors (file not found etc), instead of  handling  the  error  as
               regular  output  as  POSIX  mandates and keep going, issue an error message and
               exit.

       [1m-e[22m, [1m--exclude [4m[22mtestname[0m
               Exclude the test named in [4mtestname[24m from the list of tests made to determine the
               file type.  Valid test names are:

               apptype   EMX application type (only on EMX).

               ascii     Various types of text files (this test will try to guess the text en‚Äê
                         coding, irrespective of the setting of the ‚Äòencoding‚Äô option).

               encoding  Different text encodings for soft magic tests.

               tokens    Ignored for backwards compatibility.

               cdf       Prints details of Compound Document Files.

               compress  Checks for, and looks inside, compressed files.

               csv       Checks Comma Separated Value files.

               elf       Prints ELF file details, provided soft magic tests  are  enabled  and
                         the elf magic is found.

               json      Examines JSON (RFC-7159) files by parsing them for compliance.

               soft      Consults magic files.

               simh      Examines SIMH tape files.

               tar       Examines  tar  files  by  verifying  the checksum of the 512 byte tar
                         header.  Excluding this test can provide more  detailed  content  de‚Äê
                         scription by using the soft magic method.

               text      A synonym for ‚Äòascii‚Äô.

       [1m--exclude-quiet[0m
               Like  [1m--exclude  [22mbut  ignore  tests that [1mfile [22mdoes not know about.  This is in‚Äê
               tended for compatibility with older versions of [1mfile[22m.

       [1m--extension[0m
               Print a slash-separated list of valid extensions for the file type found.

       [1m-F[22m, [1m--separator [4m[22mseparator[0m
               Use the specified string as the separator between the filename and the file re‚Äê
               sult returned.  Defaults to ‚Äò:‚Äô.

       [1m-f[22m, [1m--files-from [4m[22mnamefile[0m
               Read the names of the files to be examined from [4mnamefile[24m (one per line)  before
               the  argument  list.  Either [4mnamefile[24m or at least one filename argument must be
               present; to test the standard input, use ‚Äò-‚Äô as a  filename  argument.   Please
               note  that  [4mnamefile[24m is unwrapped and the enclosed filenames are processed when
               this option is encountered and before any further options processing  is  done.
               This  allows one to process multiple lists of files with different command line
               arguments on the same [1mfile [22minvocation.  Thus if you want to set the  delimiter,
               you  need  to  do  it  before  you  specify  the  list of files, like: ‚Äú[1m-F [4m[22m@[24m [1m-f[0m
               [4mnamefile[24m‚Äù, instead of: ‚Äú[1m-f [4m[22mnamefile[24m [1m-F [4m[22m@[24m‚Äù.

       [1m-h[22m, [1m--no-dereference[0m
               This option causes symlinks not to be followed (on systems  that  support  sym‚Äê
               bolic  links).  This is the default if the environment variable POSIXLY_CORRECT
               is not defined.

       [1m-i[22m, [1m--mime[0m
               Causes the [1mfile [22mcommand to output mime type strings rather than the more tradi‚Äê
               tional human readable ones.  Thus it  may  say  ‚Äòtext/plain;  charset=us-ascii‚Äô
               rather than ‚ÄúASCII text‚Äù.

       [1m--mime-type[22m, [1m--mime-encoding[0m
               Like [1m-i[22m, but print only the specified element(s).

       [1m-k[22m, [1m--keep-going[0m
               Don't stop at the first match, keep going.  Subsequent matches will be have the
               string  ‚Äò\012-  ‚Äô  prepended.  (If you want a newline, see the [1m-r [22moption.)  The
               magic pattern with the highest strength (see the [1m-l [22moption) comes first.

       [1m-l[22m, [1m--list[0m
               Shows a list of patterns and  their  strength  sorted  descending  by  [4mmagic[24m(5)
               strength which is used for the matching (see also the [1m-k [22moption).

       [1m-L[22m, [1m--dereference[0m
               This  option  causes symlinks to be followed, as the like-named option in [4mls[24m(1)
               (on systems that support symbolic links).  This is the default if the  environ‚Äê
               ment variable POSIXLY_CORRECT is defined.

       [1m-m[22m, [1m--magic-file [4m[22mmagicfiles[0m
               Specify  an alternate list of files and directories containing magic.  This can
               be a single item, or a colon-separated list.  If a compiled magic file is found
               alongside a file or directory, it will be used instead.

       [1m-N[22m, [1m--no-pad[0m
               Don't pad filenames so that they align in the output.

       [1m-n[22m, [1m--no-buffer[0m
               Force stdout to be flushed after checking each file.  This is  only  useful  if
               checking  a  list  of  files.   It is intended to be used by programs that want
               filetype output from a pipe.

       [1m-p[22m, [1m--preserve-date[0m
               On systems that support [4mutime[24m(3) or [4mutimes[24m(2), attempt to preserve  the  access
               time of files analyzed, to pretend that [1mfile [22mnever read them.

       [1m-P[22m, [1m--parameter [4m[22mname=value[0m
               Set various parameter limits.

               [1mName         Default    Explanation[0m
               [1mbytes        [22m1M         max number of bytes to read from file
               [1melf_notes    [22m256        max ELF notes processed
               [1melf_phnum    [22m2K         max ELF program sections processed
               [1melf_shnum    [22m32K        max ELF sections processed
               [1melf_shsize   [22m128MB      max ELF section size processed
               [1mencoding     [22m65K        max number of bytes to determine encoding
               [1mindir        [22m50         recursion limit for indirect magic
               [1mname         [22m100        use count limit for name/use magic
               [1mregex        [22m8K         length limit for regex searches

       [1m-r[22m, [1m--raw[0m
               Don't  translate  unprintable characters to \ooo.  Normally [1mfile [22mtranslates un‚Äê
               printable characters to their octal representation.

       [1m-s[22m, [1m--special-files[0m
               Normally, [1mfile [22monly attempts to read and determine the type of  argument  files
               which  [4mstat[24m(2)  reports  are  ordinary  files.  This prevents problems, because
               reading special files may have peculiar consequences.  Specifying the [1m-s [22moption
               causes [1mfile [22mto also read argument files which are block  or  character  special
               files.   This is useful for determining the filesystem types of the data in raw
               disk partitions, which are block special files.  This option also  causes  [1mfile[0m
               to  disregard the file size as reported by [4mstat[24m(2) since on some systems it re‚Äê
               ports a zero size for raw disk partitions.

       [1m-S[22m, [1m--no-sandbox[0m
               On systems where libseccomp ([4mhttps://github.com/seccomp/libseccomp[24m)  is  avail‚Äê
               able,  the [1m-S [22moption disables sandboxing which is enabled by default.  This op‚Äê
               tion is needed for [1mfile [22mto execute external decompressing programs,  i.e.  when
               the  [1m-z  [22moption  is specified and the built-in decompressors are not available.
               On systems where sandboxing is not available, this option has no effect.

       [1m-v[22m, [1m--version[0m
               Print the version of the program and exit.

       [1m-z[22m, [1m--uncompress[0m
               Try to look inside compressed files.

       [1m-Z[22m, [1m--uncompress-noreport[0m
               Try to look inside compressed files, but report information about the  contents
               only not the compression.

       [1m-0[22m, [1m--print0[0m
               Output a null character ‚Äò\0‚Äô after the end of the filename.  Nice to [4mcut[24m(1) the
               output.  This does not affect the separator, which is still printed.

               If  this  option is repeated more than once, then [1mfile [22mprints just the filename
               followed by a NUL followed by the description (or ERROR: text)  followed  by  a
               second NUL for each entry.

       [1m--help  [22mPrint a help message and exit.

[1mENVIRONMENT[0m
       The environment variable MAGIC can be used to set the default magic file name.  If that
       variable  is set, then [1mfile [22mwill not attempt to open [4m$HOME/.magic[24m.  [1mfile [22madds ‚Äú[4m.mgc[24m‚Äù to
       the value of this variable as appropriate.  The  environment  variable  POSIXLY_CORRECT
       controls  (on systems that support symbolic links), whether [1mfile [22mwill attempt to follow
       symlinks or not.  If set, then [1mfile [22mfollows symlink, otherwise it does  not.   This  is
       also controlled by the [1m-L [22mand [1m-h [22moptions.

[1mFILES[0m
       [4m/usr/share/file/misc/magic.mgc[24m  Default compiled list of magic.
       [4m/usr/share/file/misc/magic[24m      Directory containing default magic files.

[1mEXIT STATUS[0m
       [1mfile  [22mwill  exit  with  0 if the operation was successful or >0 if an error was encoun‚Äê
       tered.  The following errors cause diagnostic messages, but don't  affect  the  program
       exit code (as POSIX requires), unless [1m-E [22mis specified:
             [1m‚Ä¢   [22mA file cannot be found
             [1m‚Ä¢   [22mThere is no permission to read a file
             [1m‚Ä¢   [22mThe file type cannot be determined

[1mEXAMPLES[0m
             $ file file.c file /dev/{wd0a,hda}
             file.c:   C program text
             file:     ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV),
                       dynamically linked (uses shared libs), stripped
             /dev/wd0a: block special (0/0)
             /dev/hda: block special (3/0)

             $ file -s /dev/wd0{b,d}
             /dev/wd0b: data
             /dev/wd0d: x86 boot sector

             $ file -s /dev/hda{,1,2,3,4,5,6,7,8,9,10}
             /dev/hda:   x86 boot sector
             /dev/hda1:  Linux/i386 ext2 filesystem
             /dev/hda2:  x86 boot sector
             /dev/hda3:  x86 boot sector, extended partition table
             /dev/hda4:  Linux/i386 ext2 filesystem
             /dev/hda5:  Linux/i386 swap file
             /dev/hda6:  Linux/i386 swap file
             /dev/hda7:  Linux/i386 swap file
             /dev/hda8:  Linux/i386 swap file
             /dev/hda9:  empty
             /dev/hda10: empty

             $ file -i file.c file /dev/{wd0a,hda}
             file.c:      text/x-c
             file:        application/x-executable
             /dev/hda:    application/x-not-regular-file
             /dev/wd0a:   application/x-not-regular-file

[1mSEE ALSO[0m
       [4mhexdump[24m(1), [4mod[24m(1), [4mstrings[24m(1), [4mmagic[24m(5)

[1mSTANDARDS CONFORMANCE[0m
       This  program  is believed to exceed the System V Interface Definition of FILE(CMD), as
       near as one can determine from the vague language contained therein.  Its  behavior  is
       mostly  compatible with the System V program of the same name.  This version knows more
       magic, however, so it will produce different (albeit  more  accurate)  output  in  many
       cases.

       The  one  significant difference between this version and System V is that this version
       treats any white space as a delimiter, so that spaces in pattern strings  must  be  es‚Äê
       caped.  For example,

             >10     string  language impress        (imPRESS data)

       in an existing magic file would have to be changed to

             >10     string  language\ impress       (imPRESS data)

       In  addition, in this version, if a pattern string contains a backslash, it must be es‚Äê
       caped.  For example

             0       string          \begindata      Andrew Toolkit document

       in an existing magic file would have to be changed to

             0       string          \\begindata     Andrew Toolkit document

       SunOS releases 3.2 and later from Sun Microsystems include a [1mfile [22mcommand derived  from
       the  System  V  one, but with some extensions.  This version differs from Sun's only in
       minor ways.  It includes the extension of the ‚Äò&‚Äô operator, used as, for example,

             >16     long&0x7fffffff >0              not stripped

[1mSECURITY[0m
       On systems where libseccomp ([4mhttps://github.com/seccomp/libseccomp[24m) is available,  [1mfile[0m
       is  enforces  limiting system calls to only the ones necessary for the operation of the
       program.  This enforcement does not provide any security benefit when [1mfile [22mis asked  to
       decompress  input files running external programs with the [1m-z [22moption.  To enable execu‚Äê
       tion of external decompressors, one needs to disable sandboxing using the [1m-S [22moption.

[1mMAGIC DIRECTORY[0m
       The magic file entries have been collected from various  sources,  mainly  USENET,  and
       contributed  by  various  authors.   Christos Zoulas (address below) will collect addi‚Äê
       tional or corrected magic file entries.  A consolidation of magic file entries will  be
       distributed periodically.

       The  order  of  entries in the magic file is significant.  Depending on what system you
       are using, the order that they are put together may be incorrect.   If  your  old  [1mfile[0m
       command  uses a magic file, keep the old magic file around for comparison purposes (re‚Äê
       name it to [4m/usr/share/file/misc/magic.orig[24m).

[1mHISTORY[0m
       There has been a [1mfile [22mcommand in every UNIX since at least Research Version 4 (man page
       dated November, 1973).  The System V version introduced one significant  major  change:
       the  external list of magic types.  This slowed the program down slightly but made it a
       lot more flexible.

       This  program,  based  on  the  System  V  version,   was   written   by   Ian   Darwin
       ‚ü®ian@darwinsys.com‚ü© without looking at anybody else's source code.

       John  Gilmore  revised  the  code extensively, making it better than the first version.
       Geoff Collyer found several inadequacies and provided some magic file entries.  Contri‚Äê
       butions of the ‚Äò&‚Äô operator by Rob McMahon, ‚ü®cudcv@warwick.ac.uk‚ü©, 1989.

       Guy Harris, ‚ü®guy@netapp.com‚ü©, made many changes from 1993 to the present.

       Primary development and maintenance  from  1990  to  the  present  by  Christos  Zoulas
       ‚ü®christos@astron.com‚ü©.

       Altered  by  Chris  Lowth  ‚ü®chris@lowth.com‚ü©, 2000: handle the [1m-i [22moption to output mime
       type strings, using an alternative magic file and internal logic.

       Altered by Eric Fischer ‚ü®enf@pobox.com‚ü©, July, 2000, to identify  character  codes  and
       attempt to identify the languages of non-ASCII files.

       Altered by Reuben Thomas ‚ü®rrt@sc3d.org‚ü©, 2007-2011, to improve MIME support, merge MIME
       and  non-MIME  magic,  support  directories  as  well as files of magic, apply many bug
       fixes, update and fix a lot of magic, improve the build system, improve the  documenta‚Äê
       tion, and rewrite the Python bindings in pure Python.

       The  list of contributors to the ‚Äòmagic‚Äô directory (magic files) is too long to include
       here.  You know who you are; thank you.  Many contributors are  listed  in  the  source
       files.

[1mLEGAL NOTICE[0m
       Copyright  (c)  Ian  F.  Darwin,  Toronto,  Canada, 1986-1999.  Covered by the standard
       Berkeley Software Distribution copyright; see the file COPYING in the source  distribu‚Äê
       tion.

       The files [4mtar.h[24m and [4mis_tar.c[24m were written by John Gilmore from his public-domain [4mtar[24m(1)
       program, and are not covered by the above license.

[1mBUGS[0m
       Please  report  bugs and send patches to the bug tracker at [4mhttps://bugs.astron.com/[24m or
       the         mailing         list          at          ‚ü®file@astron.com‚ü©          (visit
       [4mhttps://mailman.astron.com/mailman/listinfo/file[24m first to subscribe).

[1mTODO[0m
       Fix  output  so  that tests for MIME and APPLE flags are not needed all over the place,
       and actual output is only done in one place.  This needs a  design.   Suggestion:  push
       possible  outputs  on  to  a list, then pick the last-pushed (most specific, one hopes)
       value at the end, or use a default if the list is empty.  This  should  not  slow  down
       evaluation.

       The handling of MAGIC_CONTINUE and printing \012- between entries is clumsy and compli‚Äê
       cated; refactor and centralize.

       Some  of  the  encoding logic is hard-coded in encoding.c and can be moved to the magic
       files if we had a !:charset annotation.

       Continue to squash all magic bugs.  See Debian BTS for a good source.

       Store arbitrarily long strings, for example for  %s  patterns,  so  that  they  can  be
       printed  out.   Fixes  Debian bug #271672.  This can be done by allocating strings in a
       string pool, storing the string pool at the end of the magic file  and  converting  all
       the string pointers to relative offsets from the string pool.

       Add syntax for relative offsets after current level (Debian bug #466037).

       Make file -ki work, i.e. give multiple MIME types.

       Add  a  zip  library  so  we can peek inside Office2007 documents to print more details
       about their contents.

       Add an option to print URLs for the sources of the file descriptions.

       Combine script searches and add a way to map executable names to MIME types (e.g.  have
       a magic value for !:mime which causes the resulting string to be looked up in a table).
       This would avoid adding the same magic repeatedly for each new hash-bang interpreter.

       When  a  file descriptor is available, we can skip and adjust the buffer instead of the
       hacky buffer management we do now.

       Fix ‚Äúname‚Äù and ‚Äúuse‚Äù to check for consistency at compile time (duplicate ‚Äúname‚Äù,  ‚Äúuse‚Äù
       pointing to undefined ‚Äúname‚Äù ).  Make ‚Äúname‚Äù / ‚Äúuse‚Äù more efficient by keeping a sorted
       list  of  names.   Special-case  ^ to flip endianness in the parser so that it does not
       have to be escaped, and document it.

       If the offsets specified internally in the file exceed the buffer size ( HOWMANY  vari‚Äê
       able in file.h), then we don't seek to that offset, but we give up.  It would be better
       if  buffer  managements  was  done when the file descriptor is available so we can seek
       around the file.  One must be careful though because this has performance and thus  se‚Äê
       curity considerations, because one can slow down things by repeatedly seeking.

       There  is  support  now for keeping separate buffers and having offsets from the end of
       the file, but the internal buffer management still needs an overhaul.

[1mAVAILABILITY[0m
       You can obtain the original author's latest version by anonymous FTP on  [4mftp.astron.com[0m
       in the directory [4m/pub/file/file-X.YZ.tar.gz[24m.

GNU                                      April 7, 2024                                 [4mFILE[24m(1)
